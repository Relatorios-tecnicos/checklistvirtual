<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Relat√≥rios T√©cnicos</title>

<style>
body {
  font-family: Arial, sans-serif;
  background:#f4f4f4;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}

.container {
  background:#fff;
  padding:30px;
  border-radius:10px;
  width:100%;
  max-width:380px;
  box-shadow:0 0 10px rgba(0,0,0,.15);
}

h2 {
  text-align:center;
  margin-bottom:20px;
}

input {
  width:100%;
  padding:12px;
  margin-bottom:15px;
  font-size:16px;
}

button {
  width:100%;
  padding:12px;
  background:#007bff;
  color:#fff;
  border:none;
  border-radius:6px;
  font-size:16px;
  cursor:pointer;
}

button:hover {
  background:#0056b3;
}

.menu {
  display:none;
}

a {
  display:block;
  margin:10px 0;
  padding:14px;
  text-align:center;
  background:#007bff;
  color:#fff;
  text-decoration:none;
  border-radius:6px;
  font-weight:bold;
}

a:hover {
  background:#0056b3;
}

.logout {
  background:#dc3545;
}

.logout:hover {
  background:#b52a37;
}
</style>
</head>

<body>

<div class="container">

<!-- LOGIN -->
<div id="login">
  <h2>Acesso Restrito</h2>
  <input type="password" id="senha" placeholder="Digite a senha">
  <button onclick="login()">Entrar</button>
</div>

<!-- MENU -->
<div id="menu" class="menu">
  <h2>Selecione o Relat√≥rio</h2>

  <a href="rat-ordem-servico.html">RAT - Ordem de Servi√ßo</a>
  <a href="caderno-testes.html">Caderno de Testes</a>
  <a href="termo-entrega.html">Termo de Entrega</a>

  <a href="#" class="logout" onclick="logout()">Sair</a>
</div>

</div>

<script>
// ================= CONFIG =================
const HASH_SENHA = "36f902b21693d7bcb092376835dc464bc7146e606436abd7f1e686d247c0d7af";

// ================= FUN√á√ïES =================
async function sha256(text) {
  const enc = new TextEncoder().encode(text);
  const buf = await crypto.subtle.digest("SHA-256", enc);
  return Array.from(new Uint8Array(buf))
    .map(b => b.toString(16).padStart(2,"0"))
    .join("");
}

async function login() {
  const senha = document.getElementById("senha").value.trim(); // üî• CORRE√á√ÉO CR√çTICA
  const hash = await sha256(senha);

  if (hash === HASH_SENHA) {
    sessionStorage.setItem("logado","true");
    mostrarMenu();
  } else {
    alert("Senha incorreta");
  }
}

function mostrarMenu() {
  document.getElementById("login").style.display = "none";
  document.getElementById("menu").style.display = "block";
}

function logout() {
  sessionStorage.clear();
  location.href = "index.html";
}

// ================= AUTO LOGIN =================
if (sessionStorage.getItem("logado") === "true") {
  mostrarMenu();
}
</script>

</body>
</html>
