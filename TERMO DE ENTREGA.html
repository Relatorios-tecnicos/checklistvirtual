<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Termo de Entrega</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #525659; display: flex; justify-content: center; -webkit-print-color-adjust: exact; }

        .page { 
            background-color: white; 
            /* MARCA D'ÁGUA ÚNICA - Ajustada para ficar atrás das assinaturas sem atrapalhar */
            background-image: url('data:image/png;base64,COLE_AQUI_O_BASE64_DA_EMBRATEL');
            background-repeat: no-repeat;
            background-position: center 580px; 
            background-size: 280px auto;
            
            width: 794px; 
            height: 1120px; 
            padding: 40px 60px; 
            position: relative; 
            display: flex;
            flex-direction: column;
        }

        .conteudo { position: relative; z-index: 1; }

        .header-logo { text-align: right; margin-bottom: 20px; }
        .logo-claro { width: 160px; height: auto; }

        .titulo { text-align: center; font-size: 16px; font-weight: bold; margin-bottom: 30px; }
        .titulo input { font-size: 16px; font-weight: bold; border: none; width: 120px; text-align: center; background: transparent; text-decoration: underline; }

        .texto-principal { font-size: 14px; line-height: 1.6; text-align: justify; margin-bottom: 25px; }
        .input-linha { border: none; border-bottom: 1px solid #ccc; font-weight: bold; background: transparent; }

        /* TABELA CENTRALIZADA */
        .tabela-itens { width: 85%; margin: 0 auto 20px auto; border-collapse: collapse; }
        .tabela-itens th, .tabela-itens td { border: 1px solid black; padding: 8px; font-size: 13px; text-align: center; }
        .tabela-itens th { background: #f0f0f0 !important; }

        .obs { font-size: 11px; font-style: italic; text-align: center; margin-bottom: 40px; }

        /* ASSINATURAS - Removido o espaço excessivo */
        .assinatura-bloco { margin-bottom: 35px; }
        .assinatura-linha { display: flex; align-items: flex-end; }
        .label-sig { font-size: 14px; font-weight: bold; width: 110px; padding-bottom: 5px; }
        .campo-assinatura { border-bottom: 2px solid black; width: 450px; height: 60px; cursor: pointer; display: flex; justify-content: center; align-items: center; }
        .campo-assinatura img { max-height: 100%; mix-blend-mode: multiply; }
        
        .dados-id { margin-left: 110px; margin-top: 5px; }
        .dados-id input { border: none; border-bottom: 1px solid #eee; width: 350px; font-size: 13px; margin-bottom: 2px; display: block; background: transparent; }
        .sub-legenda { font-size: 10px; font-weight: bold; color: #555; }

        /* DATA - Posicionada de forma fixa para não estragar o layout */
        .data-footer { text-align: right; margin-top: 50px; font-size: 14px; padding-right: 10px; }
        .data-footer input { border: none; border-bottom: 1px solid #000; text-align: center; background: transparent; }

        .botoes { position: fixed; bottom: 20px; display: flex; gap: 10px; z-index: 1000; }
        .btn { padding: 12px 25px; border: none; border-radius: 5px; color: white; font-weight: bold; cursor: pointer; text-decoration: none; font-size: 14px; }
        .btn-pdf { background: #e1251b; }
        .btn-limpar { background: #666; }
        .btn-voltar { background: #444; }

        @media print { 
            .botoes, #modal-sig { display: none !important; } 
            body { background: white; }
            .page { height: 1120px; border: none; }
        }

        #modal-sig { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; justify-content: center; align-items: center; }
        .modal-box { background: white; padding: 15px; border-radius: 8px; width: 600px; }
        canvas { border: 1px solid #ccc; background: #fff; width: 100%; height: 300px; touch-action: none; }
    </style>
</head>
<body>

    <div class="botoes">
        <button class="btn btn-pdf" onclick="window.print()">GERAR PDF</button>
        <button class="btn btn-limpar" onclick="limpar()">ZERAR</button>
        <a href="index.html" class="btn btn-voltar">VOLTAR</a>
    </div>

    <div class="page">
        <div class="conteudo">
            <div class="header-logo">
                <img src="data:image/png;base64,COLE_AQUI_O_BASE64_DA_CLARO" class="logo-claro">
            </div>

            <div class="titulo">
                TERMO DE ENTREGA <input type="text" value="PRO.00.7063"> (PROJETO VOIP)
            </div>

            <div class="texto-principal">
                Este presente termo visa atestar que foram entregues no endereço/site 
                <input type="text" class="input-linha" style="width: 360px;" value="MPSP-Promotoria de Justiça-Conchal - ID 014677/08">, 
                os seguintes itens constantes da solicitação de ativação VoIP sob o Protocolo <strong>SAOG – </strong> 
                <input type="text" class="input-linha" style="width: 130px;" value="251506777778">.
            </div>

            <table class="tabela-itens">
                <tr>
                    <th style="width: 75%;">DESCRIÇÃO</th>
                    <th>QTD</th>
                </tr>
                <tr>
                    <td><input type="text" value="Telefone Básico – ( Yealink-T30 P )" style="width:100%; border:none; text-align:center;"></td>
                    <td><input type="text" value="02" style="width:100%; border:none; text-align:center;"></td>
                </tr>
            </table>

            <div class="obs">
                Observações: Confirmar se os aparelhos TARS contem fonte de alimentação AC
            </div>

            <div class="assinatura-bloco">
                <div class="assinatura-linha">
                    <span class="label-sig">Entregue por:</span>
                    <div class="campo-assinatura" onclick="abrirAssinar('sig1')"></div>
                </div>
                <div class="dados-id">
                    <input type="text" placeholder="Nome Completo">
                    <input type="text" placeholder="CPF ou Matrícula">
                    <span class="sub-legenda">(Assinatura / Carimbo)</span>
                </div>
            </div>

            <div class="assinatura-bloco">
                <div class="assinatura-linha">
                    <span class="label-sig">Recebido por:</span>
                    <div class="campo-assinatura" onclick="abrirAssinar('sig2')"></div>
                </div>
                <div class="dados-id">
                    <input type="text" placeholder="Nome Completo">
                    <input type="text" placeholder="CPF ou Matrícula">
                    <span class="sub-legenda">(Assinatura / Carimbo)</span>
                </div>
            </div>

            <div class="data-footer">
                São Paulo, <input type="text" value="26" style="width: 30px;"> de <input type="text" style="width: 85px;" value="Janeiro"> de <input type="text" value="2026" style="width: 50px;">.
            </div>
        </div>
    </div>

    <div id="modal-sig">
        <div class="modal-box">
            <canvas id="canvas"></canvas>
            <div style="margin-top: 10px; display: flex; gap: 10px;">
                <button onclick="salvarAssinatura()" style="flex: 1; padding: 12px; background: #28a745; color: white; border: none; font-weight: bold; border-radius: 4px;">Confirmar</button>
                <button onclick="fecharAssinar()" style="flex: 1; padding: 12px; background: #dc3545; color: white; border: none; font-weight: bold; border-radius: 4px;">Cancelar</button>
            </div>
        </div>
    </div>

    <script>
        let canvas = document.getElementById('canvas');
        let ctx = canvas.getContext('2d');
        let desenhando = false;
        let alvoAtual = null;

        function abrirAssinar(id) {
            alvoAtual = id;
            document.getElementById('modal-sig').style.display = 'flex';
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            ctx.lineWidth = 3; ctx.strokeStyle = "blue"; ctx.lineCap = "round";
        }

        function fecharAssinar() {
            document.getElementById('modal-sig').style.display = 'none';
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function salvarAssinatura() {
            const dataURL = canvas.toDataURL();
            const campos = document.querySelectorAll('.campo-assinatura');
            const index = alvoAtual === 'sig1' ? 0 : 1;
            campos[index].innerHTML = `<img src="${dataURL}">`;
            fecharAssinar();
        }

        canvas.onmousedown = () => desenhando = true;
        canvas.onmouseup = () => { desenhando = false; ctx.beginPath(); };
        canvas.onmousemove = (e) => { if (desenhando) { ctx.lineTo(e.offsetX, e.offsetY); ctx.stroke(); } };

        canvas.ontouchstart = (e) => { desenhando = true; e.preventDefault(); };
        canvas.ontouchmove = (e) => {
            if (!desenhando) return;
            let touch = e.touches[0];
            let rect = canvas.getBoundingClientRect();
            ctx.lineTo(touch.clientX - rect.left, touch.clientY - rect.top);
            ctx.stroke(); e.preventDefault();
        };

        function limpar() { if(confirm("Deseja zerar o formulário?")) location.reload(); }
    </script>
</body>
</html>
